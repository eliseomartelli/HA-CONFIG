platform: bayesian
name: Home Asleep
prior: 0.2
probability_threshold: 0.8
observations:
  # If it's Bedtime or Night, it's more probable I'm sleeping.
  - platform: template
    value_template: >
      {{ states('input_select.home_day_state') in ["Bedtime", "Night"]  }}
    prob_given_true: 0.9
    prob_given_false: 0.2

  # as observed, the humidity in my bedroom gets closer to 65/70 when I'm sleeping
  - platform: numeric_state
    entity_id: sensor.bedroom_humidity
    above: 65
    prob_given_true: 0.5
    prob_given_false: 0.1

  # if my computer monitor is on, I'm probably not sleeping
  - platform: state
    entity_id: binary_sensor.bedroom_monitor_power
    to_state: on
    prob_given_true: 0.2
    prob_given_false: 0.8

  # if my desk light is on, I'm probably not sleeping
  - platform: state
    entity_id: light.bedroom_desk
    to_state: on
    prob_given_true: 0.1
    prob_given_false: 0.8

  # if my ceiling light is on, I'm probably not sleeping
  - platform: state
    entity_id: light.bedroom_ceiling
    to_state: on
    prob_given_true: 0.1
    prob_given_false: 0.8

  # if my bedside light is on, I'm probably not sleeping
  - platform: state
    entity_id: light.bedroom_bedside
    to_state: on
    prob_given_true: 0.1
    prob_given_false: 0.6
